@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /*
   * Gray scale built from palette:
   *   Platinum #DFDEDD (223 222 221)
   *   Cadet    #9F9F9E (159 159 158)
   *   Davy's   #4A4C4A ( 74  76  74)
   * Extended to near-white / near-black, mirrored between modes.
   */

  /* ---- Light mode (inverted: light bg, dark text) ---- */
  :root {
    --color-brand: 255 214 51;
    --color-on-brand: 30 31 30;

    --gray-50:  30 31 30;
    --gray-100: 52 54 52;
    --gray-200: 74 76 74;       /* Davy's #4A4C4A */
    --gray-300: 102 104 102;
    --gray-400: 131 132 131;
    --gray-500: 159 159 158;    /* Cadet  #9F9F9E */
    --gray-600: 181 180 179;
    --gray-700: 202 201 200;
    --gray-800: 223 222 221;    /* Platinum #DFDEDD */
    --gray-900: 237 237 235;
    --gray-950: 252 252 250;
  }

  /* ---- Dark mode (normal: dark bg, light text) ---- */
  .dark {
    --gray-50:  252 252 250;
    --gray-100: 237 237 235;
    --gray-200: 223 222 221;    /* Platinum #DFDEDD */
    --gray-300: 202 201 200;
    --gray-400: 181 180 179;
    --gray-500: 159 159 158;    /* Cadet  #9F9F9E */
    --gray-600: 131 132 131;
    --gray-700: 102 104 102;
    --gray-800: 74 76 74;       /* Davy's #4A4C4A */
    --gray-900: 52 54 52;
    --gray-950: 30 31 30;
  }

  body {
    @apply bg-gray-950 text-gray-100 antialiased;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-gray-900;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-700 rounded-full;
  }
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-600;
  }
}

@layer components {
  .glass-card {
    @apply bg-gray-900/60 backdrop-blur-xl border border-gray-800/50 rounded-2xl;
  }

  .gradient-border {
    @apply relative;
    background: linear-gradient(135deg, rgba(255, 214, 51, 0.1), rgba(238, 195, 0, 0.1));
  }

  .gradient-border::before {
    content: "";
    @apply absolute inset-0 rounded-2xl;
    padding: 1px;
    background: linear-gradient(135deg, #FFD633, #EEC300, #FFD633);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    -webkit-mask-composite: xor;
    pointer-events: none;
  }

  .btn-primary {
    @apply px-6 py-2.5 bg-gradient-to-r from-brand-600 to-brand-400
           hover:from-brand-500 hover:to-brand-300
           font-semibold rounded-xl
           transition-all duration-200
           shadow-lg shadow-brand-600/25 hover:shadow-brand-500/40
           disabled:opacity-50 disabled:cursor-not-allowed
           active:scale-95;
    color: rgb(var(--color-on-brand));
  }

  .btn-secondary {
    @apply px-6 py-2.5 bg-gray-800 hover:bg-gray-700
           border border-gray-700 hover:border-gray-600
           text-gray-200 font-medium rounded-xl
           transition-all duration-200
           active:scale-95;
  }

  .input-field {
    @apply w-full px-4 py-3 bg-gray-900/80 border border-gray-700/50
           rounded-xl text-gray-100 placeholder-gray-500
           focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500/50
           transition-all duration-200;
  }

  .chip {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
           bg-brand-500/10 text-brand-300 border border-brand-500/20;
  }

  .chip-active {
    @apply bg-brand-500/30 text-brand-200 border-brand-400/40;
  }
}

/* ------------------------------------------------------------------ */
/* Wallet adapter overrides — gold theme + mobile-friendly modal      */
/* ------------------------------------------------------------------ */

/* Trigger button (header / inline) */
.wallet-adapter-button {
  @apply !bg-gradient-to-r !from-brand-600 !to-brand-400
         !rounded-xl !font-semibold !h-10 !px-5
         hover:!from-brand-500 hover:!to-brand-300 !transition-all;
  color: rgb(var(--color-on-brand)) !important;
}

.wallet-adapter-button-trigger {
  @apply !shadow-lg !shadow-brand-500/20;
}

/* Connected-state dropdown */
.wallet-adapter-dropdown-list {
  @apply !bg-gray-900 !border !border-gray-800/60 !rounded-xl !shadow-2xl !p-2;
}

.wallet-adapter-dropdown-list-item {
  @apply !rounded-lg !text-sm !text-gray-300 !font-medium;
}

.wallet-adapter-dropdown-list-item:not([disabled]):hover {
  @apply !bg-gray-800;
}

/* -------- Modal overlay -------- */
.wallet-adapter-modal {
  @apply !bg-black/60 !backdrop-blur-sm;
}

/* Modal container — full-screen sheet on mobile */
.wallet-adapter-modal-container {
  @apply !m-0 sm:!m-6 !min-h-screen sm:!min-h-0 sm:!items-center !items-end;
}

/* Modal card */
.wallet-adapter-modal-wrapper {
  @apply !bg-gray-900/95 !backdrop-blur-xl
         !border !border-gray-800/60
         !rounded-t-3xl sm:!rounded-2xl
         !shadow-2xl
         !max-w-md !w-full;
  box-shadow:
    0 0 0 1px rgba(255, 214, 51, 0.06),
    0 24px 80px -12px rgba(0, 0, 0, 0.7);
}

/* Title */
.wallet-adapter-modal-title {
  @apply !text-xl !font-bold !text-white !pt-8 !pb-2 !px-6;
}

/* Close button */
.wallet-adapter-modal-button-close {
  @apply !bg-gray-800/80 hover:!bg-gray-700 !rounded-full
         !top-4 !right-4 !p-2 !transition-colors;
}

.wallet-adapter-modal-button-close svg {
  @apply !fill-gray-400;
}

.wallet-adapter-modal-button-close:hover svg {
  @apply !fill-white;
}

/* -------- Wallet list -------- */
.wallet-adapter-modal-list {
  @apply !px-4 !pb-2;
}

.wallet-adapter-modal-list li {
  @apply !mb-2;
}

.wallet-adapter-modal-list .wallet-adapter-button {
  @apply !bg-gray-800/60 hover:!bg-gray-800
         !border !border-gray-700/40 hover:!border-brand-500/30
         !rounded-xl !h-14 !px-4 !text-[15px] !font-medium !text-gray-200
         !transition-all !duration-150;
}

.wallet-adapter-modal-list .wallet-adapter-button:hover {
  @apply !shadow-md;
  box-shadow: 0 0 0 1px rgba(255, 214, 51, 0.1), 0 4px 12px rgba(0, 0, 0, 0.3);
}

.wallet-adapter-modal-list .wallet-adapter-button-start-icon,
.wallet-adapter-modal-list .wallet-adapter-button-start-icon img {
  @apply !w-7 !h-7;
}

.wallet-adapter-modal-list .wallet-adapter-button span {
  @apply !text-xs !text-gray-500;
}

/* "More options" toggle */
.wallet-adapter-modal-list-more {
  @apply !text-sm !text-gray-400 hover:!text-brand-400 !py-3 !px-4 !transition-colors;
}

.wallet-adapter-modal-list-more svg {
  @apply !fill-gray-500;
}

/* Middle section (search / install prompt) */
.wallet-adapter-modal-middle {
  @apply !px-6 !pb-6;
}

.wallet-adapter-modal-middle-button {
  @apply !bg-gradient-to-r !from-brand-600 !to-brand-400
         !font-semibold !rounded-xl !py-3 !text-base;
  color: rgb(var(--color-on-brand)) !important;
}

/* Collapse animation */
.wallet-adapter-collapse {
  @apply !transition-all !duration-200 !ease-in-out;
}

/* Theme transition — added temporarily when toggling */
.theme-transition,
.theme-transition *,
.theme-transition *::before,
.theme-transition *::after {
  transition: background-color 0.3s ease, color 0.2s ease, border-color 0.3s ease,
              box-shadow 0.3s ease !important;
}

/* Force wallet adapter modal to always use dark palette */
.wallet-adapter-modal-wrapper,
.wallet-adapter-modal-wrapper * {
  --gray-50:  252 252 250;
  --gray-100: 237 237 235;
  --gray-200: 223 222 221;
  --gray-300: 202 201 200;
  --gray-400: 181 180 179;
  --gray-500: 159 159 158;
  --gray-600: 131 132 131;
  --gray-700: 102 104 102;
  --gray-800: 74 76 74;
  --gray-900: 52 54 52;
  --gray-950: 30 31 30;
}

/* Safe area for mobile bottom sheet */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .wallet-adapter-modal-wrapper {
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
}

/* Mobile: full-width bottom sheet, taller tap targets */
@media (max-width: 639px) {
  .wallet-adapter-modal-wrapper {
    max-width: 100% !important;
    border-bottom-left-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
  }

  .wallet-adapter-modal-title {
    padding-top: 1.25rem !important;
    padding-bottom: 0.5rem !important;
  }

  .wallet-adapter-modal-list .wallet-adapter-button {
    height: 3.5rem !important;
    font-size: 16px !important;
  }

  .wallet-adapter-modal-button-close {
    top: 0.75rem !important;
    right: 0.75rem !important;
  }
}
